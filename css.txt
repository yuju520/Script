<style>
	// å°†å­—ä½“ä¿®æ”¹ä¸ºç™½è‰²ï¼Œå¯è‡ªè¡Œä¿®æ”¹é¢œè‰²ä»£ç 
body {
    color: #FFFFFF !important;
    font-weight: bold !important;
}
</style>

<script>
    // ä¿®æ”¹é¦–é¡µlogo,å°†logo.srcåçš„é“¾æ¥æ›¿æ¢ä¸ºä½ çš„logoé“¾æ¥
    window.addEventListener('DOMContentLoaded', (event) => {
        var logo = document.querySelector('.navbar-brand img');
        if (logo) {
            logo.src = 'https://ä½ çš„logoé“¾æ¥'; // æ›¿æ¢æ­¤è¡Œé“¾æ¥
        }
    });

    // ä¿®æ”¹ä¸»é¢˜é€æ˜åº¦
    window.onload = function() {
        // åˆ—å‡ºéœ€è¦è®¾ç½®é€æ˜åº¦çš„ç±»å
        var classNames = ['node-cell', 'table-responsive', 'content', 'accordion-toggle odd', 'accordion-toggle even', 'accordian-body collapse', 'expandRow even', 'accordian-body collapse in', 'container table-responsive content', 'table table-striped table-condensed table-hover', 'node-group-cell', 'node-cell hdd', 'node-group-tag', 'node-cell center service-details-td'];

        // éå†æ¯ä¸ªç±»åï¼Œè®¾ç½®é€æ˜åº¦
        classNames.forEach(function(className) {
            var elements = document.getElementsByClassName(className);
            for (var i = 0; i < elements.length; i++) {
                elements[i].style.setProperty('background-color', 'rgba(28, 38, 39, 0.3)', 'important');// ç¬¬å››ä¸ªå‚æ•°0-1è°ƒæ•´é€æ˜åº¦
            }
        });
    };

    // ä¿®æ”¹èƒŒæ™¯å›¾ç‰‡,å°†https://æ›¿æ¢ä¸ºä½ å¸Œæœ›çš„å£çº¸é“¾æ¥ï¼Œæ¯æ¬¡åˆ·æ–°éšæœºä¸€å¼ ã€‚
    document.addEventListener('DOMContentLoaded', function() {
        const images = [
            'https://æ›¿æ¢ä¸ºä½ çš„å£çº¸é“¾æ¥ï¼Œæ¯æ¬¡åˆ·æ–°éšæœºä¸€å¼ ',
            'https://æ›¿æ¢ä¸ºä½ çš„å£çº¸é“¾æ¥ï¼Œæ¯æ¬¡åˆ·æ–°éšæœºä¸€å¼ '
        ];

        const randomImage = images[Math.floor(Math.random() * images.length)];
        document.body.style.setProperty('--background-image-url', `url(${randomImage})`);

        const style = document.createElement('style');
        style.innerHTML = `
            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-size: cover;
                background-position: center;
                z-index: -1; /* ä½¿èƒŒæ™¯å›¾ç‰‡åœ¨æ‰€æœ‰å†…å®¹åé¢ */
                background-image: var(--background-image-url);
            }
        `;
        document.head.appendChild(style);
    });
</script>

<script>
    // å¤‡æ³¨æ åŠåˆ°æœŸè®¾ç½®
    document.addEventListener('DOMContentLoaded', function() {
        var downtimeCells = document.querySelectorAll('th.node-cell.os.center');
        downtimeCells.forEach(function(cell) {
            var newTh = document.createElement('th');
            newTh.className = 'node-cell downtime center';
            newTh.textContent = 'åˆ°æœŸorå¤‡æ³¨';
            cell.parentNode.insertBefore(newTh, cell.nextSibling);
        });
        //   åºå·ä¸ºå“ªå’é¢æ¿ç®¡ç†åå°çš„æœåŠ¡å™¨IDç¼–å·
        //   VPSåºå·åé¢ç¼–è¾‘startDateå’ŒendDate,ç°åœ¨æ ¹æ®ä¸¤ä¸ªæ—¶é—´å·®è®¡ç®—è¿›åº¦æ¡æ˜¾ç¤ºï¼Œæ³¨æ„æ—¥æœŸå¿…é¡»çš„YYYY-MM-DDï¼Œä»¥24å¹´1æœˆ1æ—¥ä¹°1å¹´ï¼Œ25å¹´1æœˆ1æ—¥åˆ°æœŸä¸¾ä¾‹ï¼Œåˆ™å¡«å†™VPSè´­ä¹°æ—¶é—´startDate: new Date('2024-01-01T00:00:00Zï¼Œå†å¡«å†™VPSåˆ°æœŸæ—¶é—´endDate: new Date('2025-01-01T00:00:00Z')
		//   ä¸ç”¨æ—¥æœŸçš„ç”¨textå¤‡æ³¨å°±å¥½
        const affLinks = {
            1: { content: { type: 'text', value: 'å®¶ä¸­å°ğŸ”' } },
            2: { content: { type: 'text', value: 'ä½ æƒ³å†™çš„å¤‡æ³¨' } },
            3: { startDate: new Date('2024-06-02T00:00:00Z'), endDate: new Date('2025-06-16T00:00:00Z'), content: { type: 'text', value: '' } },
            4: { startDate: new Date('2024-06-17T00:00:00Z'), endDate: new Date('2024-12-16T00:00:00Z'), content: { type: 'text', value: '' } },
            5: { startDate: new Date('2024-07-05T00:00:00Z'), endDate: new Date('2024-08-05T00:00:00Z'), content: { type: 'text', value: '' } },
            6: { startDate: new Date('2024-07-07T00:00:00Z'), endDate: new Date('2024-10-07T00:00:00Z'), content: { type: 'text', value: '' } },
            7: { content: { type: 'text', value: 'ä½ æƒ³å†™çš„å¤‡æ³¨2' } }
        };

            const createCountdown = (startDate, endDate) => {
            const $countdown = document.createElement('div');
            $countdown.className = 'countdown'; // æ·»åŠ ç±»å
            $countdown.style.position = 'relative';
            $countdown.style.width = '100%';
            $countdown.style.height = '20px'; // è¿›åº¦æ¡é«˜åº¦å‡å°
            $countdown.style.backgroundColor = '#3e3e3e';
            $countdown.style.borderRadius = '4px'; // å››ä¸ªè§’å¸¦å¼§åº¦
            $countdown.style.overflow = 'hidden';

            const $progress = document.createElement('div');
            $progress.className = 'progress'; // æ·»åŠ ç±»å
           $progress.style.position = 'absolute';
            $progress.style.height = '100%';
            $progress.style.width = '0%';
            $progress.style.backgroundImage = 'linear-gradient(to right, #48dbfb, #feca57, #ff6b6b)'; // æ¸å˜è‰²ä»è“è‰²åˆ°é»„è‰²å†åˆ°çº¢è‰²
            $progress.style.transition = 'width 0.6s ease';
            $progress.style.borderRadius = '4px 0 0 4px';

            const $countdownTime = document.createElement('div');
            $countdownTime.style.position = 'absolute';
            $countdownTime.style.width = '100%';
            $countdownTime.style.height = '100%';
            $countdownTime.style.display = 'flex';
            $countdownTime.style.alignItems = 'center';
            $countdownTime.style.justifyContent = 'center';
            $countdownTime.style.color = '#fff';
            $countdownTime.style.fontWeight = 'bold';
            $countdownTime.style.fontSize = '13px'; // å­—ä½“å¤§å°å‡å°
            $countdownTime.style.textShadow = '1px 1px 2px rgba(0,0,0,0.7)';

            const createMarqueeBorder = (element) => {
                element.style.border = '2px solid';
                element.style.borderImage = 'linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet) 1';
                element.style.animation = 'marquee 2s linear infinite';
            };

            const updateCountdown = () => {
                const now = new Date();
                const totalDuration = endDate.getTime() - startDate.getTime();
                const elapsedDuration = now.getTime() - startDate.getTime();
                const remainingDuration = endDate.getTime() - now.getTime();

                if (remainingDuration <= 0) {
                    $countdownTime.textContent = 'å·²è¿‡æœŸ';
                    $progress.style.width = '100%';
                    $progress.style.backgroundColor = '#ff0000'; // æ›´é†’ç›®çš„çº¢è‰²
                    $progress.style.backgroundImage = 'none';
                    createMarqueeBorder($countdown);
                    return;
                }

                const days = Math.floor(remainingDuration / (1000 * 60 * 60 * 24));
                const progressPercent = (elapsedDuration / totalDuration) * 100;

                $countdownTime.textContent = `${days}å¤©`;
                $progress.style.width = `${progressPercent}%`;
            };

            updateCountdown();
            setInterval(updateCountdown, 3600000); // æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡

            $countdown.appendChild($progress);
            $countdown.appendChild($countdownTime);

            return $countdown;
        };

        const rows = document.querySelectorAll('tr');
        rows.forEach((row) => {
            let osCell = row.querySelector('td.node-cell.os.center');
            let downtimeCell = document.createElement('td');
            downtimeCell.classList.add('node-cell', 'downtime', 'center');
            let nodeId = row.id.substring(1);
            let affLink = affLinks[nodeId];
            if (!affLink) {
                affLink = { content: { type: 'text', value: 'æ— å¤‡æ³¨' } };
            }
            if (osCell && affLink && affLink.content) {
                let textNode = document.createTextNode(affLink.content.value);
                downtimeCell.appendChild(textNode);

                if (affLink.startDate && affLink.endDate) {
                    let countdown = createCountdown(affLink.startDate, affLink.endDate);
                    downtimeCell.appendChild(countdown);
                }

                osCell.parentNode.insertBefore(downtimeCell, osCell.nextSibling);
            }
        });

        // åˆ°æœŸVPSè·‘é©¬ç¯è¾¹æ¡†åŠ¨ç”»æ ·å¼ï¼Œä¸ç”¨å¯ä»¥å»æ‰
        const style = document.createElement('style');
        style.innerHTML = `
        @keyframes marquee {
            0% {
                border-image-source: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
            }
            50% {
                border-image-source: linear-gradient(to right, violet, indigo, blue, green, yellow, orange, red);
            }
            100% {
                border-image-source: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
            }
        }
        .countdown {
            animation: marquee 2s linear infinite;
        }
        `;
        document.head.appendChild(style);
    });
</script>
